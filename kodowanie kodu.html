<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Hashowanie w przeglądarce</title>
</head>
<body>
  <input type="text" id="codeInput" placeholder="Wprowadź 6-cyfrowy kod">
  <button onclick="hashAndVerify()">Zahaszuj i zweryfikuj</button>
  <p id="result"></p>

  <script>
    async function hashCode(code) {
      // Konwersja kodu na tablicę bajtów
      const encoder = new TextEncoder();
      const data = encoder.encode(code);

      // Hashowanie za pomocą SHA-256
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);

      // Zamiana na ciąg szesnastkowy
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function hashAndVerify() {
      const codeInput = document.getElementById("codeInput").value;
      const hashedCode = await hashCode(codeInput);

      // Weryfikacja kodu - przykładowo sprawdzenie z samym sobą
      const isCorrect = (await hashCode(codeInput)) === hashedCode;

      document.getElementById("result").textContent = isCorrect
        ? `Kod poprawny! Hash: ${hashedCode}`
        : 'Kod niepoprawny';
    }
  </script>
</body>
</html>